<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>投资组合管理系统</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>投资组合管理系统</h1>
        <nav>
            <ul>
                <li><a href="index.html" class="active">仪表盘</a></li>
                <li><a href="portfolio.html">投资组合</a></li>
                <li><a href="add_asset.html">添加资产</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="overview">
            <h2>投资组合概览</h2>
            <div class="summary-cards">
                <div class="card">
                    <h3>总资产价值</h3>
                    <p id="total-value">加载中...</p>
                </div>
                <div class="card">
                    <h3>总收益率</h3>
                    <p id="total-return">加载中...</p>
                </div>
                <!-- NEW: Market Status Card -->
                <div class="card">
                    <h3>市场状态</h3>
                    <p id="market-status">加载中...</p>
                </div>
                <!-- NEW: API Connection Card -->
                <div class="card">
                    <h3>API状态</h3>
                    <p id="api-status">检查中...</p>
                    <button id="test-api-btn" class="btn" onclick="testApiConnection()">
                        Test API
                    </button>
                </div>
                <!-- Update the price update card -->
                <div class="card">
                    <h3>实时价格 (Alpha Vantage)</h3>
                    <button id="update-prices-btn" class="btn" onclick="updatePrices()">
                        Update Prices
                    </button>
                    <button id="search-symbol-btn" class="btn" onclick="searchSymbol()" style="margin-top: 5px;">
                        Search Symbol
                    </button>
                    <p><small>Real Data: AAPL, MSFT, GOOGL, TSLA, AMZN</small></p>
                    <p><small>Rate Limited: 5 requests/minute</small></p>
                </div>
                <!-- Add this to your API status card -->
                <div class="card">
                    <h3>数据库状态</h3>
                    <p id="api-status">检查中...</p>
                    <button id="test-api-btn" class="btn" onclick="testApiConnection()">
                        Test Alpha Vantage
                    </button>
                    <button id="debug-portfolio-btn" class="btn" onclick="debugPortfolio()" style="margin-top: 5px;">
                        Debug Portfolio
                    </button>
                    <div id="database-controls" style="margin-top: 10px;">
                        <!-- Initialization button will be added here if needed -->
                    </div>
                </div>
            </div>
        </section>
        <section id="performance">
            <h2>投资组合表现</h2>
            <canvas id="performance-chart"></canvas>
        </section>
        <section id="recent-assets">
            <h2>Recent Stock Holdings</h2>
            <div id="recent-assets-list">Loading stock data...</div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 投资组合管理系统</p>
    </footer>
    <script src="js/dashboard.js"></script>
</body>
</html>